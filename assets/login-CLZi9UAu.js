import{d as $,r as d,a as u,o as y,c as I,w as n,b as i,e as o,u as e,f as m,g as C,q as U,_ as S,h as A,i as K,j as P,F as B,t as M,k as E,l as O,T as G,m as H,p as X,n as J,s as Q}from"./index-B-YLQ3HL.js";import{_ as W,C as Y,i as ee}from"./index-B6hv6H-Z.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const te=i("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 忘记密码了? 🔒 ",-1),ne={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},re=$({name:"ResetPasswordForm",__name:"index",props:{account:{}},emits:["onLogin","onResetPassword"],setup(w,{emit:k}){const V=w,x=k,b=d(!1),p=d(),r=d({account:V.account??localStorage.login_account??"",captcha:"",newPassword:""}),_=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function h(){var t;U.info("重置密码仅提供界面演示，无实际功能，需开发者自行扩展"),(t=p.value)==null||t.validate().then(a=>{a.length||x("onResetPassword",r.value.account)})}return(t,a)=>{const f=S,g=u("VxpInput"),s=u("VxpFormItem"),l=u("VxpButton"),L=u("VxpLinker"),R=u("VxpForm");return y(),I(R,{ref_key:"formRef",ref:p,model:e(r),rules:e(_),"hide-label":"",class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[te,i("div",null,[o(s,{prop:"account"},{default:n(()=>[o(g,{value:e(r).account,"onUpdate:value":a[0]||(a[0]=c=>e(r).account=c),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[o(f,{name:"ri:user-3-fill"})]),_:1},8,["value"])]),_:1}),o(s,{prop:"captcha"},{default:n(()=>[o(g,{value:e(r).captcha,"onUpdate:value":a[1]||(a[1]=c=>e(r).captcha=c),size:"large",placeholder:"验证码",tabindex:"2"},{prefix:n(()=>[o(f,{name:"ic:baseline-verified-user"})]),"after-action":n(()=>[o(l,null,{default:n(()=>[m(" 发送验证码 ")]),_:1})]),_:1},8,["value"])]),_:1}),o(s,{prop:"newPassword"},{default:n(()=>[o(g,{value:e(r).newPassword,"onUpdate:value":a[2]||(a[2]=c=>e(r).newPassword=c),size:"large",type:"password","plain-password":"",placeholder:"新密码",tabindex:"3"},{prefix:n(()=>[o(f,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1})]),o(l,{loading:e(b),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:C(h,["prevent"])},{default:n(()=>[m(" 确认 ")]),_:1},8,["loading"]),i("div",ne,[o(L,{type:"primary",onClick:a[3]||(a[3]=c=>x("onLogin",e(r).account))},{default:n(()=>[m(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"])}}}),se=i("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 探索从这里开始! 🚀 ",-1),ae={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},le=$({name:"RegisterForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister"],setup(w,{emit:k}){const V=w,x=k,b=d(!1),p=d(),r=d({account:V.account??"",captcha:"",password:"",checkPassword:""}),_=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:t=>t!==r.value.password?"两次输入的密码不一致":!0}]});function h(){var t;U.info("注册模块仅提供界面演示，无实际功能，需开发者自行扩展"),(t=p.value)==null||t.validate().then(a=>{a.length||x("onRegister",r.value.account)})}return(t,a)=>{const f=S,g=u("VxpInput"),s=u("VxpFormItem"),l=u("VxpButton"),L=u("VxpLinker"),R=u("VxpForm");return y(),I(R,{ref_key:"formRef",ref:p,model:e(r),rules:e(_),"hide-label":"",class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[se,i("div",null,[o(s,{prop:"account"},{default:n(()=>[o(g,{value:e(r).account,"onUpdate:value":a[0]||(a[0]=c=>e(r).account=c),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[o(f,{name:"ri:user-3-fill"})]),_:1},8,["value"])]),_:1}),o(s,{prop:"captcha"},{default:n(()=>[o(g,{value:e(r).captcha,"onUpdate:value":a[1]||(a[1]=c=>e(r).captcha=c),size:"large",placeholder:"验证码",tabindex:"2"},{prefix:n(()=>[o(f,{name:"ic:baseline-verified-user"})]),"after-action":n(()=>[o(l,null,{default:n(()=>[m(" 发送验证码 ")]),_:1})]),_:1},8,["value"])]),_:1}),o(s,{prop:"password"},{default:n(()=>[o(g,{value:e(r).password,"onUpdate:value":a[2]||(a[2]=c=>e(r).password=c),size:"large",type:"password","plain-password":"",placeholder:"密码",tabindex:"3"},{prefix:n(()=>[o(f,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1}),o(s,{prop:"checkPassword"},{default:n(()=>[o(g,{value:e(r).checkPassword,"onUpdate:value":a[3]||(a[3]=c=>e(r).checkPassword=c),size:"large",type:"password","plain-password":"",placeholder:"确认密码",tabindex:"4"},{prefix:n(()=>[o(f,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1})]),o(l,{loading:e(b),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:C(h,["prevent"])},{default:n(()=>[m(" 注册 ")]),_:1},8,["loading"]),i("div",ae,[m(" 已经有帐号? "),o(L,{type:"primary",onClick:a[4]||(a[4]=c=>x("onLogin",e(r).account))},{default:n(()=>[m(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"])}}}),ie={class:"mb-6"},ce={class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"},ue={class:"mb-4 flex-center-between"},pe={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},de={key:1,class:"flex-col-center"},me=i("img",{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"},null,-1),fe=i("div",{class:"mt-2 op-50"}," 请使用微信扫码登录 ",-1),ge=[me,fe],_e={class:"mt-4 text-center -mb-4"},xe=$({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(w,{emit:k}){const V=w,x=k,b=A(),p="One-step-admin 基础版",r=d(!1),_=d("default"),h=d(),t=d({account:V.account??localStorage.login_account??"",password:"",remember:!!localStorage.login_account}),a=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function f(){var s;(s=h.value)==null||s.validate().then(l=>{l.length||(r.value=!0,b.login(t.value).then(()=>{r.value=!1,t.value.remember?localStorage.setItem("login_account",t.value.account):localStorage.removeItem("login_account"),x("onLogin",t.value.account)}).finally(()=>{r.value=!1}))})}function g(s){t.value.account=s,t.value.password="123456",f()}return(s,l)=>{const L=W,R=S,c=u("VxpInput"),z=u("VxpFormItem"),N=u("VxpCheckbox"),q=u("VxpLinker"),F=u("VxpButton"),j=u("VxpDivider"),D=u("VxpSpace"),Z=u("VxpForm");return y(),I(Z,{ref_key:"formRef",ref:h,model:e(t),rules:e(a),"hide-label":"",class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[i("div",ie,[o(L,{modelValue:e(_),"onUpdate:modelValue":l[0]||(l[0]=v=>K(_)?_.value=v:null),options:[{label:"账号密码登录",value:"default"},{label:"扫码登录",value:"qrcode"}]},null,8,["modelValue"])]),e(_)==="default"?(y(),P(B,{key:0},[i("h3",ce," 欢迎使用 "+M(e(p))+" ! 👋🏻 ",1),i("div",null,[o(z,{prop:"account"},{default:n(()=>[o(c,{value:e(t).account,"onUpdate:value":l[1]||(l[1]=v=>e(t).account=v),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[o(R,{name:"ri:user-3-fill"})]),_:1},8,["value"])]),_:1}),o(z,{prop:"password"},{default:n(()=>[o(c,{value:e(t).password,"onUpdate:value":l[2]||(l[2]=v=>e(t).password=v),size:"large",type:"password","plain-password":"",placeholder:"密码",tabindex:"2",onKeyup:E(f,["enter"])},{prefix:n(()=>[o(R,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1})]),i("div",ue,[o(N,{checked:e(t).remember,"onUpdate:checked":l[3]||(l[3]=v=>e(t).remember=v)},{default:n(()=>[m(" 记住我 ")]),_:1},8,["checked"]),o(q,{onClick:l[4]||(l[4]=v=>x("onResetPassword",e(t).account))},{default:n(()=>[m(" 忘记密码了? ")]),_:1})]),o(F,{loading:e(r),type:"primary",size:"large",style:{width:"100%"},onClick:C(f,["prevent"])},{default:n(()=>[m(" 登录 ")]),_:1},8,["loading"]),i("div",pe,[m(" 还没有帐号? "),o(q,{type:"primary",onClick:l[5]||(l[5]=v=>x("onRegister",e(t).account))},{default:n(()=>[m(" 创建新帐号 ")]),_:1})])],64)):e(_)==="qrcode"?(y(),P("div",de,ge)):O("",!0),i("div",_e,[o(j,null,{default:n(()=>[m("演示账号一键登录")]),_:1}),o(D,{justify:"center"},{default:n(()=>[o(F,{type:"primary",size:"small",onClick:l[6]||(l[6]=v=>g("admin"))},{default:n(()=>[m(" admin ")]),_:1}),o(F,{size:"small",onClick:l[7]||(l[7]=v=>g("test"))},{default:n(()=>[m(" test ")]),_:1})]),_:1})])]),_:1},8,["model","rules"])}}}),ve=""+new URL("login-banner-ZfMZACb6.png",import.meta.url).href,T=w=>(X("data-v-e76978b8"),w=w(),J(),w),we=T(()=>i("div",{class:"bg-banner"},null,-1)),be={class:"login-box"},ye=T(()=>i("div",{class:"login-banner"},[i("img",{src:ee,class:"absolute left-4 top-4 h-30px rounded ring ring-stone-2 dark-ring-stone-8"}),i("img",{src:ve,class:"banner"})],-1)),ke={class:"login-form flex-col-center"},Ve=$({name:"Login",__name:"login",setup(w){var _;const k=H(),V=Q(),x=d(((_=k.query.redirect)==null?void 0:_.toString())??"/"),b=d(),p=d("login"),r=d();return(h,t)=>{const a=xe,f=le,g=re;return y(),P(B,null,[we,i("div",be,[ye,i("div",ke,[o(G,{name:"fade",mode:"out-in"},{default:n(()=>[e(p)==="login"?(y(),I(a,{key:0,ref_key:"formRef",ref:r,account:e(b),onOnLogin:t[0]||(t[0]=s=>e(V).push(e(x))),onOnRegister:t[1]||(t[1]=s=>{p.value="register",s=s}),onOnResetPassword:t[2]||(t[2]=s=>{p.value="resetPassword",s=s})},null,8,["account"])):e(p)==="register"?(y(),I(f,{key:1,ref_key:"formRef",ref:r,account:e(b),onOnRegister:t[3]||(t[3]=s=>{p.value="login",s=s}),onOnLogin:t[4]||(t[4]=s=>p.value="login")},null,8,["account"])):e(p)==="resetPassword"?(y(),I(g,{key:2,ref_key:"formRef",ref:r,account:e(b),onOnResetPassword:t[5]||(t[5]=s=>{p.value="login",s=s}),onOnLogin:t[6]||(t[6]=s=>p.value="login")},null,8,["account"])):O("",!0)]),_:1})])]),o(Y)],64)}}}),Le=oe(Ve,[["__scopeId","data-v-e76978b8"]]);export{Le as default};
